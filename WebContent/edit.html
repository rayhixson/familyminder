<!DOCTYPE html>
<html>
<head>

<!-- link rel="stylesheet" type="text/css" href="css/main.css">   -->
<link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.3.0/knockout-min.js"></script>
<script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
<script src="usergrid-utilities.js"></script>
<script src="source/js.cookie.js"></script>

<script>
$(document).ready(function() {
	personViewModel.getAllPeople();
});
		
</script>

<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>

<div class="container">

	<div data-bind="visible: isLoggedIn() == false">
		Name: <input data-bind="value: loginname"></input><br/>
		Password: <input data-bind="value: password" type="password"></input><br/>
		<input value="Login" type="button" data-bind="click: login"></input>
	</div>
	<div data-bind="visible: isLoggedIn">
		<div id="token" data-bind="text: token">
		</div>

		<br/>
		<input value="Logout" type="button" data-bind="click: logout"></input>
	</div>

</div>

<br/><br/>

<div id="users" class="container">
<table class="table table-striped table-bordered table-hover table-condensed">
	<thead><tr>
		<th>People</th>
	</tr></thead>
	<tbody data-bind="foreach: people">
		<tr>
			<td>
			<div class="row">
			<div class="col-sm-6">
			
			<form class="form-horizontal" role="form">
				<div class="form-group">
					<label class="control-label col-sm-2" for="username">Name:</label>
					<div class="col-sm-10">
						<input data-bind="value: username" class="form-control" id="username"/>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2" for="email">Email:</label>
					<div class="col-sm-10">
						<input data-bind="value: email" type="email" class="form-control" id="email"/>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2" for="bday">Birthday:</label>
					<div class="col-sm-10">
						<input data-bind="value: bday" class="form-control" id="bday"/>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2" for="image">Img Url:</label>
					<div class="col-sm-10">
						<input data-bind="value: image" class="form-control" id="image"/>
					</div>
				</div>
				<div class="form-group">
					<label class="control-label col-sm-2" for="spouse">Spouse</label>
					<div class="col-sm-10">
						<select data-bind="options: $parent.people,
											optionsText: 'username',
											optionsValue: 'uuid',
											value: spouseUuid,
											optionsCaption: 'None'" size="1"></select>
					</div>
				</div>
				<div class="form-group">
					<div class="col-sm-offset-2 col-sm-2">
						<button data-bind="click: savePerson" type="submit" class="btn btn-primary">Save</button>
					</div>
					<div class="col-sm-8">
						<button data-bind="click: deletePerson" type="submit" class="btn btn-primary">Delete</button>
					</div>
				</div>
			</form>

			<br/>			
			</div>
			
			<div class="col-sm-2">
				<img data-bind="attr: {src: image}" width="100" height="100"/>
			</div>
			
			<div class="col-sm-4">
				<span class="label label-default">Kids</span>
				<ul data-bind="foreach: kids" class="list-group">
					<li class="list-group-item">
					<span data-bind="text: username"></span>
					<a href="#" 
					data-bind="click: function() { $parent.removeKid(this.username()); }"><span class="badge">del</span></a>
					</li>
				</ul>
		

			<form class="form-horizontal" role="form">
				<div class="dropdown">
				<button class="btn btn-default dropdown-toggle" type="button" id="people" 
				data-toggle="dropdown">Add Child
				<span class="caret"></span></button>
				<ul class="dropdown-menu" role="menu" aria-labelledby="people" 
				data-bind="foreach: $parent.people">
					<li role="presentation"><a role="menuitem" href="#" 
						data-bind="click: function() { makeChild($parent); }"><span 
						data-bind="text: username"></span></a>
				</ul>
				</div>
			</form>
			</div>
			</div>

			<div class="row" data-bind="fadeAlert: showAlert">
				<div class="col-sm-12">
					<div class="alert alert-success">
   						<button type="button" class="close" data-dismiss="alert">x</button>
   						<strong>User saved.</strong>
					</div>
				</div>
			</div>

			</td>
		</tr>
	</tbody>
</table>
</div>

<br/><br/>

<div class="container">
<form data-bind="submit: addUser">
	New User Name: <input data-bind="value: newPersonName">
	<button type="submit">Create User</button> 
</form>
</div>


<br/><br/>
<pre id="raw"></pre>

<script src="family.js"></script>
</body>
</html>
